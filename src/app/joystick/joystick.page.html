
<div>
  <ion-toolbar>
    <ion-title class="header-menu">Control</ion-title>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</div>

<ion-content [fullscreen]="false">


  <div class="container">


    <!-- btn settings -->
      <ion-fab class="ion-fab-settings" slot="fixed" vertical="top" horizontal="start"  (click)="viewSettings = !viewSettings">
        <ion-fab-button size="small"  [color]="viewSettings ? 'warning' : 'medium'">
          <ion-icon name="cog" style="font-size: 22px"></ion-icon>
        </ion-fab-button>
      </ion-fab>


    <!-- acordion settings -->
    <ng-container *ngIf="viewSettings">
      <ion-grid>
        <ion-row>

          <ion-col size="2">
          </ion-col>

          <ion-col size="10" >
            <h5 class="ion-text-center"> <b>Configuración</b> </h5>

            <ion-accordion-group class="acordion-group-settings" expand="inset" [value]="['first']">
              <ion-accordion value="first">
                <ion-item slot="header" class="item-header-settings">
                  <ion-icon name="logo-rss" size="small"></ion-icon>
                  <ion-label>Conexión</ion-label>
                </ion-item>
                <div class="ion-padding" slot="content">
                  <ion-item>
                    <ion-input label="IP"[(ngModel)]="ipRobot" type="string" labelPlacement="stacked"></ion-input>
                  </ion-item>
                  <ion-item>
                    <ion-input label="Puerto"[(ngModel)]="port" type="number" labelPlacement="stacked"></ion-input>
                  </ion-item>

                   <!-- botones de conexion -->
                  <div style="display: flex; justify-content: center; align-self: center">
                    <div *ngIf="!connected" style="margin-top: 10px;">
                      <ion-button (click)="connect()" size="small" shape="round" color="success">Conectar</ion-button>
                    </div>
                    <div *ngIf="connected" style="margin-top: 10px;">
                      <ion-button (click)="disconnect()" size="small" shape="round" color="danger">Desconectar</ion-button>
                    </div>
                  </div>
                </div>
              </ion-accordion>
              <!-- <ion-accordion value="second">
                <ion-item slot="header" color="light">
                  <ion-icon name="hammer" size="small"></ion-icon>
                  <ion-label>Personalizar Joystick</ion-label>
                </ion-item>
                <div class="ion-padding" slot="content">

                  <ion-item>
                    <ion-select label="Modo" label-placement="stacked" placeholder="Select mode" [(ngModel)]="optionsJoystick.mode">
                      <ion-select-option value="static">Static</ion-select-option>
                      <ion-select-option value="dynamic">Dynamic</ion-select-option>
                      <ion-select-option value="semi">Semi</ion-select-option>
                    </ion-select>
                  </ion-item>

                  <ion-item>
                    <ion-input label="Color" [(ngModel)]="optionsJoystick.color" type="color" labelPlacement="stacked"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-input type="number" pattern="[0-9]*" min="100" max="200" placeholder="min: 100 - max:200" label="Tamaño"[(ngModel)]="optionsJoystick.size" labelPlacement="stacked"></ion-input>
                  </ion-item>

                  <div style="display: flex; justify-content: center; align-self: center; margin-top: 10px;">
                    <ion-button size="small" shape="round" color="warning" (click)="configJoystick()">Aplicar</ion-button>
                  </div>
                  <ion-toast
                    [isOpen]="isToastOpen"
                    message="Tamaño minimo 100 y maximo 200"
                    [duration]="3000"
                    (didDismiss)="setOpen(false)"
                  ></ion-toast>
                </div>
              </ion-accordion> -->
              <ion-accordion value="third">
                <ion-item slot="header" class="item-header-settings">
                  <ion-icon name="walk" size="small"></ion-icon>
                  <ion-label>Velocidad</ion-label>
                </ion-item>
                <div class="ion-padding" slot="content">
                  <ion-item>
                    <ion-input label="Movimiento Linear"[(ngModel)]="maxLinear" type="number" labelPlacement="stacked"></ion-input>
                    <ion-icon name="information-circle-outline" size="small" id="present-alert-lineal"></ion-icon>
                    <ion-alert
                      trigger="present-alert-lineal"
                      header="Información"
                      subHeader="Movimiento Linear"
                      message="Se refiere al desplazamiento en línea recta."
                      [buttons]="alertButtons"
                    ></ion-alert>
                  </ion-item>
                  <ion-item>
                    <ion-input label="Movimiento Angular"[(ngModel)]="maxAngular" type="number" labelPlacement="stacked"></ion-input>
                    <ion-icon name="information-circle-outline" size="small" id="present-alert-angular"></ion-icon>
                    <ion-alert
                      trigger="present-alert-angular"
                      header="Información"
                      subHeader="Movimiento Angular"
                      message="Se refiere a la rotación en la orientación alrededor de un punto o un eje."
                      [buttons]="alertButtons"
                    ></ion-alert>
                  </ion-item>
                  <div style="display: flex; justify-content: center; align-self: center; margin-top: 10px;">
                    <ion-button size="small" shape="round" color="warning" (click)="configJoystick()">Aplicar</ion-button>
                  </div>
                </div>
              </ion-accordion>
            </ion-accordion-group>

            <ion-toast
                [isOpen]="isToastOpen"
                message="Joystick actualizado"
                [duration]="2000"
                (didDismiss)="setOpen2(false)"
            ></ion-toast>
          </ion-col>

        </ion-row>
      </ion-grid>
    </ng-container>

      <ion-grid>

        <!-- joystick botones -->
        <ion-row>
          <ion-grid style="margin-top: 20%;">

            <ion-row class="ion-justify-content-center joystick-btns">

              <ion-toolbar style="border-top-right-radius: 10px; border-top-left-radius: 10px;">
                <ion-title class="joystick-btns-header-menu">Botones</ion-title>
              </ion-toolbar>

              <div class="joystick-btns-content" >

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 5%;">
                  <ion-col size="3" class="ion-text-center">
                    <ion-button (click)="goForward()" [disabled]="!connected" size="small" color="medium">
                      <ion-icon name="arrow-up"></ion-icon>
                    </ion-button>
                  </ion-col>

                  <ion-col size="3" class="ion-text-center">
                    <ion-button (click)="goLeft()" [disabled]="!connected" size="small"  color="medium">
                      <ion-icon name="arrow-back"></ion-icon>
                    </ion-button>
                  </ion-col>

                  <ion-col size="3" class="ion-text-center">
                    <ion-button (click)="goStop()" [disabled]="!connected" size="small"  color="danger">Stop</ion-button>
                  </ion-col>

                  <ion-col size="3" class="ion-text-center">
                    <ion-button (click)="goRight()" [disabled]="!connected" size="small"  color="medium">
                      <ion-icon name="arrow-forward"></ion-icon>
                    </ion-button>
                  </ion-col>

                  <ion-col size="3" class="ion-text-center">
                    <ion-button (click)="goBack()" [disabled]="!connected" size="small"  color="medium">
                      <ion-icon name="arrow-down"></ion-icon>
                    </ion-button>
                  </ion-col>
                </div>

              </div>

            </ion-row>

          </ion-grid>
        </ion-row>

        <!--Joystick-->
        <ion-row>
          <ion-grid>
            <ion-row class="joystick-joystick">

              <ion-toolbar style="border-top-right-radius: 10px; border-top-left-radius: 10px;">
                <ion-title class="joystick-btns-header-menu">Joystick</ion-title>
              </ion-toolbar>

              <ion-col size="12">
                <div style="display: flex; align-items: center; justify-content: center;">
                  <div class="joystick-container" id="joystick">
                    <!-- Flecha Norte -->
                    <div class="arrow north"></div>
                    <!-- Flecha Sur -->
                    <div class="arrow south"></div>
                    <!-- Flecha Este -->
                    <div class="arrow east"></div>
                    <!-- Flecha Oeste -->
                    <div class="arrow west"></div>
                  </div>
                </div>
              </ion-col>

            </ion-row>
          </ion-grid>
        </ion-row>

       </ion-grid>
    </div>


</ion-content>

<ion-footer class="ion-no-border" collapse="fade">
  <ion-toolbar class="footer-style">
    <ion-grid >
      <ion-row>
        <!-- bateria -->
        <!-- <ion-col size="6">
          <div style="display: flex; justify-content: start;">
            <ion-item style="border-radius: 10px;">
              <h6>Bateria: </h6>
              <ion-icon style="color: cadetblue;" name="battery-charging"></ion-icon>
              <ion-icon style="color: #c91414;" name="battery-dead"></ion-icon>
              <ion-icon style="color: #80c914;" name="battery-full"></ion-icon>
            </ion-item>
          </div>
        </ion-col> -->
        <ion-col size="6">
            <!-- cnx -->
            <div style="display: flex; justify-content: start;">

              <div *ngIf="!connecting" class="cnx-style">
                <ion-item style="border-radius: 10px;">
                  <h6> <b>Conexión:</b> </h6>
                    <div *ngIf="connected">
                      <ion-icon style="margin-top: 10px; margin-left: 5px; color: #80c914;" name="logo-rss"></ion-icon>
                    </div>
                    <div *ngIf="!connected">
                      <ion-icon style="margin-top: 10px; margin-left: 5px; color: #c91414; font-size: 20px;" name="close-circle"></ion-icon>
                    </div>
                </ion-item>
              </div>

              <div *ngIf="connecting" class="cnx-style">
                <ion-item style="border-radius: 10px;">
                  <h6> <b>Conexión:</b> </h6>
                  <ion-spinner *ngIf="connecting"></ion-spinner>
                </ion-item>
              </div>

            </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>
